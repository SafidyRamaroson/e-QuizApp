generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model User {
    id Int @id @default(autoincrement())
    name String
    email String @unique
    isAdmin Boolean @default(false)
    password String 
    quizz_sessions QuizzSession[]
    categoriesQuizz CategoryQuizz[]
}


model CategoryQuizz {
    id Int @id @default(autoincrement())
    name String 
    questions Question[]
    userId Int
    user User @relation(fields: [userId],references: [id])
}

model Question {
    id Int @id @default(autoincrement())
    content String
    categoryId Int
    createdAt DateTime @default(now())
    updatedAt DateTime 
    category CategoryQuizz @relation(fields: [categoryId], references: [id])
    choises Choice[]
}

model Choice {
    id Int @id @default(autoincrement())
    content String
    questionId Int
    is_correct Boolean @default(false)
    question Question  @relation(fields: [questionId], references: [id])
}

model QuizzSession {
    id Int @id @default(autoincrement())
    start_time DateTime  @default(now())
    end_time DateTime 
    score Int 
    userId Int
    user User @relation(fields: [userId], references: [id])
    userAnswers UserAnswer[]
}

model UserAnswer {
    id Int @id @default(autoincrement())
    quizzSession_id Int
    quizzSession QuizzSession @relation(fields: [quizzSession_id], references: [id])
}
